# Production Readiness Fix Plan

**Created:** December 31, 2025  
**Status:** WAITING FOR USER TO RETURN  
**Approach:** Option A - Backups first, then fixes one at a time with testing

---

## Summary of Issues to Fix

| # | Issue | File | Risk |
|---|-------|------|------|
| 1 | Login broken - ErrorCodes import mismatch | `server/src/routes/auth.js` | ðŸŸ¢ Low |
| 2 | ESLint config uses deprecated `extends` | `eslint.config.js` | ðŸŸ¢ Low |

---

## Step-by-Step Plan

### Step 1: Create Backups
```powershell
# Backup auth.js
Copy-Item "c:\projects\donor\server\src\routes\auth.js" "c:\projects\donor\server\src\routes\auth.js.backup"

# Backup eslint.config.js
Copy-Item "c:\projects\donor\eslint.config.js" "c:\projects\donor\eslint.config.js.backup"
```

### Step 2: Fix Auth.js ErrorCodes Import
**Current code (line 18):**
```javascript
import { ErrorCodes } from "../lib/errorCodes.js";
```

**Change to:**
```javascript
import { ErrorCodes } from "../../utils/errorCodes.js";
```

**Why:** The `utils/errorCodes.js` file uses nested structure (`ErrorCodes.AUTH.INVALID_CREDENTIALS`) which is what the code expects. The `lib/errorCodes.js` uses flat structure which causes the crash.

### Step 3: Test Auth Fix
```powershell
# Restart server and test login
cd c:\projects\donor\server
npm start

# In another terminal, test login:
curl -X POST http://localhost:3001/api/auth/login -H "Content-Type: application/json" -d "{\"email\":\"test@test.com\",\"password\":\"wrong\"}"

# Should return 401 error, NOT a server crash
```

### Step 4: Fix ESLint Config
**Current code (line 9):**
```javascript
extends: [js.configs.recommended],
```

**Change to:**
```javascript
...js.configs.recommended,
```

### Step 5: Test ESLint Fix
```powershell
cd c:\projects\donor
npm run lint
```

### Step 6: Run Full Test Suite
```powershell
cd c:\projects\donor\server
npm test -- --run
```

### Step 7: Run Production Build
```powershell
cd c:\projects\donor
npm run build
```

### Step 8: Run Production Readiness Audit
```powershell
cd c:\projects\donor\server
node production-readiness-audit.js
```

---

## Rollback Instructions (If Anything Breaks)

```powershell
# Restore auth.js
Copy-Item "c:\projects\donor\server\src\routes\auth.js.backup" "c:\projects\donor\server\src\routes\auth.js" -Force

# Restore eslint.config.js
Copy-Item "c:\projects\donor\eslint.config.js.backup" "c:\projects\donor\eslint.config.js" -Force
```

---

## When You Return

Just say: **"Let's start the fix plan"**

I will:
1. Create backups
2. Apply Fix #1
3. Test it
4. Apply Fix #2  
5. Test it
6. Run full test suite
7. Confirm everything works

---

**See you when you're back!** ðŸ‘‹
