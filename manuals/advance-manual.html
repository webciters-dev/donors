<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AWAKE_Connect_Complete_Manual.md</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="awake-connect---complete-platform-manual">AWAKE Connect - Complete Platform Manual</h1>
<p><strong>Version:</strong> 1.0 Production Ready<br>
<strong>Date:</strong> November 21, 2025<br>
<strong>Repository:</strong> <a href="https://github.com/webciters-dev/donors">https://github.com/webciters-dev/donors</a><br>
<strong>Live Platform:</strong> <a href="https://aircrew.nl">https://aircrew.nl</a></p>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#executive-summary">Executive Summary</a></li>
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#system-architecture">System Architecture</a></li>
<li><a href="#user-roles--workflows">User Roles &amp; Workflows</a></li>
<li><a href="#technical-specifications">Technical Specifications</a></li>
<li><a href="#database-architecture">Database Architecture</a></li>
<li><a href="#api-documentation">API Documentation</a></li>
<li><a href="#security-framework">Security Framework</a></li>
<li><a href="#business-logic--integrations">Business Logic &amp; Integrations</a></li>
<li><a href="#deployment-guide">Deployment Guide</a></li>
<li><a href="#user-manual">User Manual</a></li>
<li><a href="#administration-guide">Administration Guide</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#maintenance--support">Maintenance &amp; Support</a></li>
</ol>
<hr>
<h2 id="executive-summary">Executive Summary</h2>
<p><strong>AWAKE Connect</strong> is a comprehensive educational sponsorship platform designed to connect Pakistani students seeking financial support with international donors willing to fund education. The platform manages the complete lifecycle from student application through graduation, including financial processing, communication, and progress tracking.</p>
<h3 id="key-statistics">Key Statistics</h3>
<ul>
<li><strong>12 Core Database Models</strong> managing relationships between users, applications, and financial transactions</li>
<li><strong>5 User Roles</strong> with distinct workflows and permissions</li>
<li><strong>6 Supported Currencies</strong> (USD, PKR, GBP, EUR, CAD, AUD) with real-time conversion</li>
<li><strong>40+ API Endpoints</strong> handling all platform functionality</li>
<li><strong>Production Ready</strong> with comprehensive security and monitoring</li>
</ul>
<hr>
<h2 id="project-overview">Project Overview</h2>
<h3 id="mission-statement">Mission Statement</h3>
<p>To democratize access to quality education by creating a transparent, secure platform that efficiently connects students with donors while ensuring accountability and success tracking.</p>
<h3 id="core-features">Core Features</h3>
<h4 id="for-students">For Students</h4>
<ul>
<li>Multi-step application process with document verification</li>
<li>Photo and video profile creation</li>
<li>University selection with academic program integration</li>
<li>Progress tracking and donor communication</li>
<li>Academic achievement documentation</li>
</ul>
<h4 id="for-donors">For Donors</h4>
<ul>
<li>Student marketplace with advanced filtering capabilities</li>
<li>Multi-currency payment processing via Stripe</li>
<li>Direct communication with sponsored students</li>
<li>Progress monitoring and receipt management</li>
<li>Tax documentation and reporting</li>
</ul>
<h4 id="for-administrators">For Administrators</h4>
<ul>
<li>Comprehensive application review workflows</li>
<li>Case worker assignment and management</li>
<li>Interview scheduling with board members</li>
<li>Financial disbursement tracking</li>
<li>Analytics and reporting dashboards</li>
</ul>
<h3 id="success-metrics">Success Metrics</h3>
<ul>
<li><strong>85%+ Application Approval Rate</strong></li>
<li><strong>99%+ Payment Success Rate</strong></li>
<li><strong>&lt;2 Second Page Load Times</strong></li>
<li><strong>99.9% System Uptime</strong></li>
</ul>
<hr>
<h2 id="system-architecture">System Architecture</h2>
<h3 id="technology-stack">Technology Stack</h3>
<h4 id="frontend">Frontend</h4>
<ul>
<li><strong>Framework:</strong> React 18.3.1 with Vite</li>
<li><strong>Routing:</strong> React Router DOM 6 (Hash-based)</li>
<li><strong>UI Library:</strong> shadcn/ui + Radix UI primitives</li>
<li><strong>Styling:</strong> Tailwind CSS with custom design system</li>
<li><strong>State Management:</strong> Context API + React Query</li>
<li><strong>Form Handling:</strong> React Hook Form + Zod validation</li>
<li><strong>Payment Processing:</strong> Stripe integration</li>
</ul>
<h4 id="backend">Backend</h4>
<ul>
<li><strong>Runtime:</strong> Node.js with Express.js</li>
<li><strong>Database:</strong> PostgreSQL with Prisma ORM</li>
<li><strong>Authentication:</strong> JWT with role-based access control</li>
<li><strong>File Processing:</strong> Multer + Sharp for image optimization</li>
<li><strong>Email Service:</strong> Nodemailer with SMTP configuration</li>
<li><strong>Security:</strong> Helmet, CORS, reCAPTCHA integration</li>
</ul>
<h4 id="infrastructure">Infrastructure</h4>
<ul>
<li><strong>Process Management:</strong> PM2 with cluster mode</li>
<li><strong>Web Server:</strong> Nginx with SSL termination</li>
<li><strong>SSL Certificates:</strong> Let’s Encrypt automated renewal</li>
<li><strong>Monitoring:</strong> Custom logging and health checks</li>
</ul>
<h3 id="architecture-patterns">Architecture Patterns</h3>
<h4 id="component-organization">Component Organization</h4>
<pre><code>Frontend:
├── src/
│   ├── pages/          # Route components (40+ pages)
│   ├── components/     # Reusable UI components
│   ├── lib/           # Utilities and context providers
│   ├── api/           # API client and endpoints
│   └── hooks/         # Custom React hooks

Backend:
├── src/
│   ├── routes/        # API route handlers (25+ files)
│   ├── middleware/    # Authentication, validation, security
│   ├── lib/           # Business logic and services
│   └── validation/    # Zod schemas for data validation
</code></pre>
<h4 id="security-architecture">Security Architecture</h4>
<ul>
<li><strong>Authentication:</strong> JWT tokens with role-based permissions</li>
<li><strong>Authorization:</strong> Middleware-based route protection</li>
<li><strong>Input Validation:</strong> Zod schemas with sanitization</li>
<li><strong>File Security:</strong> Type validation and size limits</li>
<li><strong>Communication:</strong> Encrypted messaging with admin oversight</li>
</ul>
<hr>
<h2 id="user-roles--workflows">User Roles &amp; Workflows</h2>
<h3 id="student-role-student">1. Student Role (STUDENT)</h3>
<h4 id="registration--application-flow">Registration &amp; Application Flow</h4>
<pre><code>Registration → Application (3 Steps) → Document Upload → Review → Active Phase
</code></pre>
<p><strong>Step 1: Account Creation</strong></p>
<ul>
<li>Email and password registration</li>
<li>reCAPTCHA protection for spam prevention</li>
<li>Welcome email with platform orientation</li>
</ul>
<p><strong>Step 2: Educational Information</strong></p>
<ul>
<li>University selection from dynamic database</li>
<li>Academic program and degree level</li>
<li>GPA and graduation year</li>
<li>Field of study specialization</li>
</ul>
<p><strong>Step 3: Financial Application</strong></p>
<ul>
<li>Required funding amount in local currency</li>
<li>Breakdown of expenses (tuition, hostel, other)</li>
<li>Family income verification</li>
<li>Supporting documentation</li>
</ul>
<p><strong>Step 4: Profile Enhancement</strong></p>
<ul>
<li>Student photo upload (optimized thumbnails)</li>
<li>Introduction video (60-90 seconds)</li>
<li>Personal statement and career goals</li>
<li>Social media profile links</li>
</ul>
<h4 id="active-student-management">Active Student Management</h4>
<ul>
<li><strong>Progress Tracking:</strong> Semester updates with GPA reporting</li>
<li><strong>Document Sharing:</strong> Certificate and transcript uploads</li>
<li><strong>Donor Communication:</strong> Direct messaging with sponsoring donor</li>
<li><strong>Achievement Documentation:</strong> Awards and accomplishments</li>
</ul>
<h3 id="donor-role-donor">2. Donor Role (DONOR)</h3>
<h4 id="donor-journey">Donor Journey</h4>
<pre><code>Registration → Student Browse → Selection → Payment → Ongoing Communication
</code></pre>
<p><strong>Registration Process</strong></p>
<ul>
<li>Account creation with donor preferences</li>
<li>Currency preference selection</li>
<li>Optional organization information</li>
<li>Tax identification for receipt purposes</li>
</ul>
<p><strong>Student Selection</strong></p>
<ul>
<li><strong>Public Browse:</strong> Anonymous student preview</li>
<li><strong>Protected Marketplace:</strong> Full profiles for registered donors</li>
<li><strong>Advanced Filtering:</strong> By university, field, GPA, funding need</li>
<li><strong>Geographic Preferences:</strong> Country and region selection</li>
</ul>
<p><strong>Payment Processing</strong></p>
<ul>
<li><strong>Multi-Currency Support:</strong> USD, GBP, EUR, CAD, PKR, AUD</li>
<li><strong>Payment Frequencies:</strong> One-time, monthly, quarterly, annual</li>
<li><strong>Payment Plans:</strong> Up to 24-month installment options</li>
<li><strong>Stripe Integration:</strong> Secure payment processing</li>
</ul>
<p><strong>Ongoing Management</strong></p>
<ul>
<li><strong>Progress Monitoring:</strong> Student academic updates</li>
<li><strong>Direct Communication:</strong> Messaging with sponsored student</li>
<li><strong>Receipt Management:</strong> Tax documentation and reporting</li>
<li><strong>Impact Tracking:</strong> Success metrics and outcomes</li>
</ul>
<h3 id="admin-role-admin">3. Admin Role (ADMIN)</h3>
<h4 id="administrative-workflow">Administrative Workflow</h4>
<pre><code>Application Review → Case Worker Assignment → Interview Scheduling → Final Approval
</code></pre>
<p><strong>Application Management</strong></p>
<ul>
<li><strong>Review Queue:</strong> Prioritized application processing</li>
<li><strong>Document Verification:</strong> Identity and academic credential validation</li>
<li><strong>Case Worker Assignment:</strong> Field officer allocation for verification</li>
<li><strong>Status Tracking:</strong> Real-time application pipeline monitoring</li>
</ul>
<p><strong>Interview System</strong></p>
<ul>
<li><strong>Board Member Management:</strong> Panel composition and scheduling</li>
<li><strong>Interview Coordination:</strong> Calendar integration and notifications</li>
<li><strong>Decision Recording:</strong> Individual board member votes</li>
<li><strong>Final Determination:</strong> Majority-based approval decisions</li>
</ul>
<p><strong>Financial Oversight</strong></p>
<ul>
<li><strong>Disbursement Management:</strong> Fund allocation to students</li>
<li><strong>Payment Reconciliation:</strong> Donor payment verification</li>
<li><strong>Financial Reporting:</strong> Revenue and distribution analytics</li>
<li><strong>Audit Trail:</strong> Complete transaction history</li>
</ul>
<h3 id="sub-admincase-worker-role-sub_admin">4. Sub-Admin/Case Worker Role (SUB_ADMIN)</h3>
<h4 id="field-review-process">Field Review Process</h4>
<pre><code>Assignment → Document Review → Field Visit → Recommendation
</code></pre>
<p><strong>Responsibilities</strong></p>
<ul>
<li><strong>Application Document Review:</strong> Verification of submitted materials</li>
<li><strong>Field Visits:</strong> Home visits for family income verification</li>
<li><strong>Character Assessment:</strong> Community and academic reference checks</li>
<li><strong>Recommendation Submission:</strong> Approval/rejection recommendations with detailed notes</li>
</ul>
<p><strong>Task Management</strong></p>
<ul>
<li><strong>Assignment Notifications:</strong> Email alerts for new applications</li>
<li><strong>Review Dashboard:</strong> Prioritized task list with deadlines</li>
<li><strong>Progress Tracking:</strong> Completion status monitoring</li>
<li><strong>Admin Communication:</strong> Direct feedback channel</li>
</ul>
<h3 id="super-admin-role-super_admin">5. Super Admin Role (SUPER_ADMIN)</h3>
<h4 id="system-administration">System Administration</h4>
<ul>
<li><strong>Admin User Management:</strong> Create and manage admin accounts</li>
<li><strong>System Configuration:</strong> Platform settings and parameters</li>
<li><strong>Security Oversight:</strong> User access and permission management</li>
<li><strong>High-Level Reporting:</strong> System performance and usage analytics</li>
</ul>
<hr>
<h2 id="technical-specifications">Technical Specifications</h2>
<h3 id="database-schema-12-core-models">Database Schema (12 Core Models)</h3>
<h4 id="user-management">User Management</h4>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token comment">-- User authentication and role management</span>
<span class="token keyword">User</span> {
  id: String <span class="token variable">@id</span>
  email: String <span class="token variable">@unique</span>
  passwordHash: String
  role: UserRole <span class="token punctuation">(</span>STUDENT<span class="token operator">|</span>DONOR<span class="token operator">|</span>ADMIN<span class="token operator">|</span>SUB_ADMIN<span class="token operator">|</span>SUPER_ADMIN<span class="token punctuation">)</span>
  studentId: String? <span class="token variable">@unique</span>
  donorId: String? <span class="token variable">@unique</span>
  createdAt: <span class="token keyword">DateTime</span>
  updatedAt: <span class="token keyword">DateTime</span>
}
</code></pre>
<h4 id="student-model">Student Model</h4>
<pre class=" language-sql"><code class="prism  language-sql">Student {
  id: String <span class="token variable">@id</span>
  name: String
  email: String <span class="token variable">@unique</span>
  university: String
  field: String
  gpa: <span class="token keyword">Float</span>
  gradYear: <span class="token keyword">Int</span>
  sponsored: <span class="token keyword">Boolean</span> <span class="token variable">@default</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  studentPhase: StudentPhase <span class="token punctuation">(</span>APPLICATION<span class="token operator">|</span>ACTIVE<span class="token operator">|</span>GRADUATED<span class="token punctuation">)</span>
  <span class="token comment">-- Profile enhancements</span>
  photoUrl: String?
  introVideoUrl: String?
  <span class="token comment">-- Academic details</span>
  degreeLevel: String?
  currentAcademicYear: String?
  <span class="token comment">-- Financial information</span>
  familySize: <span class="token keyword">Int</span>?
  monthlyFamilyIncome: String?
  <span class="token comment">-- Social media links</span>
  facebookUrl: String?
  linkedinUrl: String?
  whatsappNumber: String?
}
</code></pre>
<h4 id="application-model">Application Model</h4>
<pre class=" language-sql"><code class="prism  language-sql">Application {
  id: String <span class="token variable">@id</span>
  studentId: String
  amount: <span class="token keyword">Int</span> <span class="token comment">-- Required funding in specified currency</span>
  currency: Currency
  <span class="token keyword">status</span>: ApplicationStatus
  <span class="token comment">-- Financial breakdown</span>
  tuitionFee: <span class="token keyword">Int</span>?
  hostelFee: <span class="token keyword">Int</span>?
  livingExpenses: <span class="token keyword">Int</span>?
  <span class="token comment">-- Currency conversion</span>
  amountBaseUSD: <span class="token keyword">Int</span>?
  fxRateToUSD: <span class="token keyword">Float</span>?
  <span class="token comment">-- Approval workflow</span>
  approvalReason: String?
  submittedAt: <span class="token keyword">DateTime</span>
}
</code></pre>
<h4 id="multi-currency-system">Multi-Currency System</h4>
<pre class=" language-sql"><code class="prism  language-sql"><span class="token comment">-- Supported currencies with automatic conversion</span>
<span class="token keyword">enum</span> Currency {
  USD  <span class="token comment">-- Primary currency for calculations</span>
  PKR  <span class="token comment">-- Pakistani Rupee (local)</span>
  GBP  <span class="token comment">-- British Pound</span>
  EUR  <span class="token comment">-- Euro</span>
  CAD  <span class="token comment">-- Canadian Dollar</span>
  AUD  <span class="token comment">-- Australian Dollar</span>
}

<span class="token comment">-- Exchange rate management</span>
FxRate {
  id: String <span class="token variable">@id</span>
  base: Currency
  quote: Currency
  rate: <span class="token keyword">Float</span>
  asOf: <span class="token keyword">DateTime</span>
  source: String?
}
</code></pre>
<h3 id="api-architecture-40-endpoints">API Architecture (40+ Endpoints)</h3>
<h4 id="authentication-endpoints">Authentication Endpoints</h4>
<pre class=" language-javascript"><code class="prism  language-javascript">POST <span class="token operator">/</span>api<span class="token operator">/</span>auth<span class="token operator">/</span>register<span class="token operator">-</span>student    <span class="token comment">// Student registration (reCAPTCHA)</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>auth<span class="token operator">/</span>register<span class="token operator">-</span>donor      <span class="token comment">// Donor registration (reCAPTCHA)</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>auth<span class="token operator">/</span>login               <span class="token comment">// User login</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>auth<span class="token operator">/</span>request<span class="token operator">-</span>password<span class="token operator">-</span>reset <span class="token comment">// Password reset (reCAPTCHA)</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>auth<span class="token operator">/</span>reset<span class="token operator">-</span>password<span class="token operator">/</span><span class="token punctuation">:</span>token  <span class="token comment">// Password reset confirmation</span>
</code></pre>
<h4 id="student-management">Student Management</h4>
<pre class=" language-javascript"><code class="prism  language-javascript">GET  <span class="token operator">/</span>api<span class="token operator">/</span>students                 <span class="token comment">// Public student list</span>
GET  <span class="token operator">/</span>api<span class="token operator">/</span>students<span class="token operator">/</span><span class="token punctuation">:</span>id             <span class="token comment">// Student details</span>
PUT  <span class="token operator">/</span>api<span class="token operator">/</span>students<span class="token operator">/</span>me              <span class="token comment">// Update student profile</span>
GET  <span class="token operator">/</span>api<span class="token operator">/</span>students<span class="token operator">/</span>me<span class="token operator">/</span>sponsorship  <span class="token comment">// Check sponsorship status</span>
</code></pre>
<h4 id="application-processing">Application Processing</h4>
<pre class=" language-javascript"><code class="prism  language-javascript">GET  <span class="token operator">/</span>api<span class="token operator">/</span>applications             <span class="token comment">// Role-aware application list</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>applications             <span class="token comment">// Create application</span>
PATCH <span class="token operator">/</span>api<span class="token operator">/</span>applications<span class="token operator">/</span><span class="token punctuation">:</span>id        <span class="token comment">// Update application</span>
PATCH <span class="token operator">/</span>api<span class="token operator">/</span>applications<span class="token operator">/</span><span class="token punctuation">:</span>id<span class="token operator">/</span>status <span class="token comment">// Admin status updates</span>
</code></pre>
<h4 id="payment-processing">Payment Processing</h4>
<pre class=" language-javascript"><code class="prism  language-javascript">POST <span class="token operator">/</span>api<span class="token operator">/</span>payments<span class="token operator">/</span>create<span class="token operator">-</span>payment<span class="token operator">-</span>intent <span class="token comment">// Stripe payment setup</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>payments<span class="token operator">/</span>confirm<span class="token operator">-</span>payment      <span class="token comment">// Payment confirmation</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>payments<span class="token operator">/</span>webhook              <span class="token comment">// Stripe webhook handler</span>
</code></pre>
<h4 id="file-management">File Management</h4>
<pre class=" language-javascript"><code class="prism  language-javascript">POST <span class="token operator">/</span>api<span class="token operator">/</span>uploads                  <span class="token comment">// Document upload</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>photos<span class="token operator">/</span>upload           <span class="token comment">// Photo upload with optimization</span>
POST <span class="token operator">/</span>api<span class="token operator">/</span>videos<span class="token operator">/</span>upload<span class="token operator">-</span>intro     <span class="token comment">// Video upload with processing</span>
</code></pre>
<h3 id="security-implementation">Security Implementation</h3>
<h4 id="authentication--authorization">Authentication &amp; Authorization</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// JWT middleware with role checking</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">requireAuth</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> token <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>authorization<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> payload <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> JWT_SECRET<span class="token punctuation">)</span><span class="token punctuation">;</span>
  req<span class="token punctuation">.</span>user <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> payload<span class="token punctuation">.</span>sub<span class="token punctuation">,</span> role<span class="token punctuation">:</span> payload<span class="token punctuation">.</span>role <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Role-based access control</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">onlyRoles</span><span class="token punctuation">(</span><span class="token operator">...</span>roles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>roles<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>user<span class="token operator">?</span><span class="token punctuation">.</span>role<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> error<span class="token punctuation">:</span> <span class="token string">'Forbidden'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="recaptcha-integration">reCAPTCHA Integration</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Three security levels based on endpoint sensitivity</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> requireStrictRecaptcha <span class="token operator">=</span> <span class="token function">requireRecaptcha</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minScore<span class="token punctuation">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span>  <span class="token comment">// High security for registration</span>
  allowedActions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token string">'register'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> requireMediumRecaptcha <span class="token operator">=</span> <span class="token function">requireRecaptcha</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minScore<span class="token punctuation">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>  <span class="token comment">// Medium security for password reset</span>
  allowedActions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token string">'register'</span><span class="token punctuation">,</span> <span class="token string">'reset'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> requireBasicRecaptcha <span class="token operator">=</span> <span class="token function">requireRecaptcha</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minScore<span class="token punctuation">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>  <span class="token comment">// Basic security for messaging</span>
  allowedActions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'submit'</span><span class="token punctuation">,</span> <span class="token string">'form'</span><span class="token punctuation">,</span> <span class="token string">'message'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<hr>
<h2 id="business-logic--integrations">Business Logic &amp; Integrations</h2>
<h3 id="student-application-workflow">Student Application Workflow</h3>
<h4 id="phase-1-application-submission">Phase 1: Application Submission</h4>
<ol>
<li><strong>Student Registration</strong> with email verification</li>
<li><strong>Multi-Step Application</strong> (education, finance, documents)</li>
<li><strong>Automatic Validation</strong> of required fields and documents</li>
<li><strong>Admin Notification</strong> of new application</li>
</ol>
<h4 id="phase-2-review-process">Phase 2: Review Process</h4>
<ol>
<li><strong>Admin Initial Review</strong> for completeness</li>
<li><strong>Case Worker Assignment</strong> based on geographic region</li>
<li><strong>Field Verification</strong> including home visits</li>
<li><strong>Document Authentication</strong> and background checks</li>
<li><strong>Recommendation Submission</strong> with detailed notes</li>
</ol>
<h4 id="phase-3-interview-process">Phase 3: Interview Process</h4>
<ol>
<li><strong>Board Member Assignment</strong> to interview panel</li>
<li><strong>Interview Scheduling</strong> with calendar integration</li>
<li><strong>Email Notifications</strong> to all participants</li>
<li><strong>Interview Execution</strong> with decision recording</li>
<li><strong>Final Approval</strong> based on majority vote</li>
</ol>
<h4 id="phase-4-marketplace-activation">Phase 4: Marketplace Activation</h4>
<ol>
<li><strong>Student Profile Optimization</strong> for donor matching</li>
<li><strong>Public Listing</strong> on browse page</li>
<li><strong>Protected Marketplace</strong> access for registered donors</li>
<li><strong>Matching Algorithm</strong> based on preferences</li>
</ol>
<h3 id="payment-processing-workflow">Payment Processing Workflow</h3>
<h4 id="multi-currency-support">Multi-Currency Support</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Automatic currency detection based on university location</span>
<span class="token keyword">const</span> <span class="token function-variable function">detectCurrency</span> <span class="token operator">=</span> <span class="token punctuation">(</span>university<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>university<span class="token punctuation">.</span>country <span class="token operator">===</span> <span class="token string">'Pakistan'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'PKR'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>university<span class="token punctuation">.</span>country <span class="token operator">===</span> <span class="token string">'United Kingdom'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'GBP'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>university<span class="token punctuation">.</span>country <span class="token operator">===</span> <span class="token string">'United States'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'USD'</span><span class="token punctuation">;</span>
  <span class="token comment">// ... additional currency mappings</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Real-time currency conversion</span>
<span class="token keyword">const</span> convertAmount <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>amount<span class="token punctuation">,</span> fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rate <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getFxRate</span><span class="token punctuation">(</span>fromCurrency<span class="token punctuation">,</span> toCurrency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>amount <span class="token operator">*</span> rate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="stripe-integration">Stripe Integration</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Payment intent creation with metadata</span>
<span class="token keyword">const</span> paymentIntent <span class="token operator">=</span> <span class="token keyword">await</span> stripe<span class="token punctuation">.</span>paymentIntents<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  amount<span class="token punctuation">:</span> convertedAmount<span class="token punctuation">,</span>
  currency<span class="token punctuation">:</span> donorCurrency<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  metadata<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    studentId<span class="token punctuation">:</span> student<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    donorId<span class="token punctuation">:</span> donor<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    originalAmount<span class="token punctuation">:</span> application<span class="token punctuation">.</span>amount<span class="token punctuation">,</span>
    originalCurrency<span class="token punctuation">:</span> application<span class="token punctuation">.</span>currency
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Automatic sponsorship creation on successful payment</span>
<span class="token keyword">const</span> createSponsorship <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>paymentIntent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sponsorship <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>sponsorship<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      donorId<span class="token punctuation">:</span> paymentIntent<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>donorId<span class="token punctuation">,</span>
      studentId<span class="token punctuation">:</span> paymentIntent<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>studentId<span class="token punctuation">,</span>
      amount<span class="token punctuation">:</span> paymentIntent<span class="token punctuation">.</span>amount<span class="token punctuation">,</span>
      stripePaymentIntentId<span class="token punctuation">:</span> paymentIntent<span class="token punctuation">.</span>id
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Send confirmation emails to both parties</span>
  <span class="token keyword">await</span> <span class="token function">sendPaymentConfirmationEmails</span><span class="token punctuation">(</span>sponsorship<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="communication-system">Communication System</h3>
<h4 id="multi-party-messaging">Multi-Party Messaging</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Conversation creation between donor and student</span>
<span class="token keyword">const</span> createConversation <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>donorId<span class="token punctuation">,</span> studentId<span class="token punctuation">,</span> applicationId<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> conversation <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>conversation<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'DONOR_STUDENT'</span><span class="token punctuation">,</span>
      participantIds<span class="token punctuation">:</span> <span class="token punctuation">[</span>donorId<span class="token punctuation">,</span> studentId<span class="token punctuation">]</span><span class="token punctuation">,</span>
      studentId<span class="token punctuation">,</span>
      applicationId
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> conversation<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Message routing with admin oversight</span>
<span class="token keyword">const</span> sendMessage <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>conversationId<span class="token punctuation">,</span> senderId<span class="token punctuation">,</span> text<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token keyword">await</span> prisma<span class="token punctuation">.</span>conversationMessage<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      conversationId<span class="token punctuation">,</span>
      senderId<span class="token punctuation">,</span>
      senderRole<span class="token punctuation">:</span> req<span class="token punctuation">.</span>user<span class="token punctuation">.</span>role<span class="token punctuation">,</span>
      text
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// Notify admin of sensitive conversations</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">containsSensitiveContent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">notifyAdmin</span><span class="token punctuation">(</span>conversationId<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="email-notification-system">Email Notification System</h3>
<h4 id="automated-email-triggers">Automated Email Triggers</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Welcome emails for new users</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendStudentWelcomeEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> htmlContent <span class="token operator">=</span> <span class="token function">generateWelcomeHTML</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'student'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    to<span class="token punctuation">:</span> email<span class="token punctuation">,</span>
    subject<span class="token punctuation">:</span> <span class="token string">'Welcome to AWAKE Connect'</span><span class="token punctuation">,</span>
    html<span class="token punctuation">:</span> htmlContent
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Application status updates</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendApplicationStatusEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
  email<span class="token punctuation">,</span> name<span class="token punctuation">,</span> status<span class="token punctuation">,</span> reason 
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> htmlContent <span class="token operator">=</span> <span class="token function">generateStatusHTML</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> status<span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    to<span class="token punctuation">:</span> email<span class="token punctuation">,</span>
    subject<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Application Update: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>
    html<span class="token punctuation">:</span> htmlContent
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Interview scheduling notifications</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sendInterviewScheduledEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  email<span class="token punctuation">,</span> name<span class="token punctuation">,</span> scheduledAt<span class="token punctuation">,</span> meetingLink<span class="token punctuation">,</span> boardMembers
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> htmlContent <span class="token operator">=</span> <span class="token function">generateInterviewHTML</span><span class="token punctuation">(</span>
    name<span class="token punctuation">,</span> scheduledAt<span class="token punctuation">,</span> meetingLink<span class="token punctuation">,</span> boardMembers
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">sendEmail</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    to<span class="token punctuation">:</span> email<span class="token punctuation">,</span>
    subject<span class="token punctuation">:</span> <span class="token string">'Interview Scheduled - AWAKE Connect'</span><span class="token punctuation">,</span>
    html<span class="token punctuation">:</span> htmlContent
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<hr>
<h2 id="deployment-guide">Deployment Guide</h2>
<h3 id="production-environment-setup">Production Environment Setup</h3>
<h4 id="server-configuration">Server Configuration</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Ubuntu Server 20.04+ LTS</span>
<span class="token comment"># Minimum Requirements: 2GB RAM, 20GB Storage, 1 CPU Core</span>

<span class="token comment"># 1. Update system</span>
<span class="token function">sudo</span> apt update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> apt upgrade -y

<span class="token comment"># 2. Install Node.js 18+</span>
curl -fsSL https://deb.nodesource.com/setup_18.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs

<span class="token comment"># 3. Install PostgreSQL</span>
<span class="token function">sudo</span> apt <span class="token function">install</span> postgresql postgresql-contrib

<span class="token comment"># 4. Install PM2</span>
<span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> pm2 -g

<span class="token comment"># 5. Install Nginx</span>
<span class="token function">sudo</span> apt <span class="token function">install</span> nginx

<span class="token comment"># 6. Install Certbot for SSL</span>
<span class="token function">sudo</span> apt <span class="token function">install</span> certbot python3-certbot-nginx
</code></pre>
<h4 id="database-setup">Database Setup</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Create database user and database</span>
<span class="token function">sudo</span> -u postgres createuser --interactive awakeuser
<span class="token function">sudo</span> -u postgres createdb awake_production

<span class="token comment"># Grant permissions</span>
<span class="token function">sudo</span> -u postgres psql
GRANT ALL PRIVILEGES ON DATABASE awake_production TO awakeuser<span class="token punctuation">;</span>
ALTER USER awakeuser WITH PASSWORD <span class="token string">'secure_password_here'</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="application-deployment">Application Deployment</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># 1. Clone repository</span>
<span class="token function">git</span> clone https://github.com/webciters-dev/donors.git
<span class="token function">cd</span> donors

<span class="token comment"># 2. Install dependencies</span>
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">cd</span> server <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> <span class="token punctuation">..</span>

<span class="token comment"># 3. Build frontend</span>
<span class="token function">npm</span> run build

<span class="token comment"># 4. Configure environment variables</span>
<span class="token function">cp</span> server/.env.example server/.env.production
<span class="token comment"># Edit server/.env.production with production values</span>

<span class="token comment"># 5. Run database migrations</span>
<span class="token function">cd</span> server
npx prisma migrate deploy
npx prisma generate

<span class="token comment"># 6. Start with PM2</span>
pm2 start ecosystem.config.json --env production
pm2 startup
pm2 save
</code></pre>
<h4 id="nginx-configuration">Nginx Configuration</h4>
<pre class=" language-nginx"><code class="prism  language-nginx"><span class="token comment"># /etc/nginx/sites-available/awake.webciters.dev</span>
<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token keyword">server_name</span> awake<span class="token punctuation">.</span>webciters<span class="token punctuation">.</span>dev<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">301</span> <span class="token keyword">https</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token variable">$server_name</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">listen</span> <span class="token number">443</span> <span class="token keyword">ssl</span> http2<span class="token punctuation">;</span>
    <span class="token keyword">server_name</span> awake<span class="token punctuation">.</span>webciters<span class="token punctuation">.</span>dev<span class="token punctuation">;</span>

    <span class="token comment"># SSL Configuration</span>
    <span class="token keyword">ssl_certificate</span> <span class="token operator">/</span>etc<span class="token operator">/</span>letsencrypt<span class="token operator">/</span>live<span class="token operator">/</span>awake<span class="token punctuation">.</span>webciters<span class="token punctuation">.</span>dev<span class="token operator">/</span>fullchain<span class="token punctuation">.</span>pem<span class="token punctuation">;</span>
    <span class="token keyword">ssl_certificate_key</span> <span class="token operator">/</span>etc<span class="token operator">/</span>letsencrypt<span class="token operator">/</span>live<span class="token operator">/</span>awake<span class="token punctuation">.</span>webciters<span class="token punctuation">.</span>dev<span class="token operator">/</span>privkey<span class="token punctuation">.</span>pem<span class="token punctuation">;</span>

    <span class="token comment"># Security headers</span>
    <span class="token keyword">add_header</span> X<span class="token operator">-</span>Frame<span class="token operator">-</span>Options <span class="token string">"SAMEORIGIN"</span> always<span class="token punctuation">;</span>
    <span class="token keyword">add_header</span> X<span class="token operator">-</span>XSS<span class="token operator">-</span>Protection <span class="token string">"1; mode=block"</span> always<span class="token punctuation">;</span>
    <span class="token keyword">add_header</span> X<span class="token operator">-</span>Content<span class="token operator">-</span>Type<span class="token operator">-</span>Options <span class="token string">"nosniff"</span> always<span class="token punctuation">;</span>

    <span class="token comment"># File upload size</span>
    <span class="token keyword">client_max_body_size</span> 10M<span class="token punctuation">;</span>

    <span class="token comment"># Serve static files</span>
    <span class="token keyword">root</span> <span class="token operator">/</span>home<span class="token operator">/</span>awakeuser<span class="token operator">/</span>awake<span class="token operator">/</span>dist<span class="token punctuation">;</span>
    <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>

    <span class="token comment"># API proxy</span>
    <span class="token keyword">location</span> <span class="token operator">/</span>api<span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">3001</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> Connection <span class="token string">'upgrade'</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>
        <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto <span class="token variable">$scheme</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># Uploaded files</span>
    <span class="token keyword">location</span> <span class="token operator">/</span>uploads<span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">alias</span> <span class="token operator">/</span>home<span class="token operator">/</span>awakeuser<span class="token operator">/</span>awake<span class="token operator">/</span><span class="token keyword">server</span><span class="token operator">/</span>uploads<span class="token operator">/</span><span class="token punctuation">;</span>
        <span class="token keyword">expires</span> 1y<span class="token punctuation">;</span>
        <span class="token keyword">add_header</span> Cache<span class="token operator">-</span>Control <span class="token string">"public, immutable"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># Frontend routing</span>
    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="ssl-certificate-setup">SSL Certificate Setup</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Obtain SSL certificate</span>
<span class="token function">sudo</span> certbot --nginx -d awake.webciters.dev

<span class="token comment"># Auto-renewal setup</span>
<span class="token function">sudo</span> systemctl <span class="token function">enable</span> certbot.timer
<span class="token function">sudo</span> systemctl start certbot.timer
</code></pre>
<h3 id="environment-variables">Environment Variables</h3>
<h4 id="frontend-.env">Frontend (.env)</h4>
<pre class=" language-env"><code class="prism  language-env">VITE_API_URL=https://awake.webciters.dev
VITE_STRIPE_PUBLISHABLE_KEY=pk_live_...
VITE_RECAPTCHA_SITE_KEY=6Lf...
</code></pre>
<h4 id="backend-server.env.production">Backend (server/.env.production)</h4>
<pre class=" language-env"><code class="prism  language-env"># Database
DATABASE_URL=postgresql://awakeuser:secure_password@localhost:5432/awake_production

# Server
NODE_ENV=production
PORT=3001
FRONTEND_URL=https://awake.webciters.dev

# Authentication
JWT_SECRET=very_secure_random_string_here
JWT_EXPIRES_IN=7d

# Email Configuration
EMAIL_HOST=smtp.your-email-provider.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=noreply@yourdomain.com
EMAIL_PASS=email_password_here
EMAIL_FROM=AWAKE Connect &lt;noreply@yourdomain.com&gt;

# Stripe (Production Keys)
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...

# reCAPTCHA
RECAPTCHA_SECRET_KEY=6Lf...
</code></pre>
<hr>
<h2 id="user-manual">User Manual</h2>
<h3 id="getting-started-for-students">Getting Started for Students</h3>
<h4 id="creating-your-account">1. Creating Your Account</h4>
<ol>
<li>Visit the platform homepage</li>
<li>Click “Student Registration”</li>
<li>Complete the reCAPTCHA verification</li>
<li>Fill in your email and create a secure password</li>
<li>Check your email for verification link</li>
</ol>
<h4 id="completing-your-application">2. Completing Your Application</h4>
<p><strong>Step 1: Educational Information</strong></p>
<ul>
<li>Select your university from the dropdown</li>
<li>Choose your field of study and degree level</li>
<li>Enter your current GPA and expected graduation year</li>
<li>Provide any additional academic details</li>
</ul>
<p><strong>Step 2: Financial Information</strong></p>
<ul>
<li>Specify the total amount needed for your education</li>
<li>Break down expenses: tuition, accommodation, living costs</li>
<li>Provide family income information</li>
<li>Upload supporting financial documents</li>
</ul>
<p><strong>Step 3: Profile &amp; Documents</strong></p>
<ul>
<li>Upload a professional profile photo</li>
<li>Record a 60-90 second introduction video</li>
<li>Upload required documents:
<ul>
<li>CNIC (National Identity Card)</li>
<li>Guardian CNIC</li>
<li>Academic transcripts</li>
<li>University enrollment proof</li>
<li>Income certificates</li>
</ul>
</li>
</ul>
<h4 id="application-tracking">3. Application Tracking</h4>
<ul>
<li>Monitor your application status in real-time</li>
<li>Respond to case worker requests for additional information</li>
<li>Participate in scheduled interviews when required</li>
<li>Maintain communication with assigned reviewers</li>
</ul>
<h4 id="active-student-phase">4. Active Student Phase</h4>
<ul>
<li>Submit regular academic progress updates</li>
<li>Maintain communication with your sponsor</li>
<li>Upload semester results and achievements</li>
<li>Keep your profile information current</li>
</ul>
<h3 id="getting-started-for-donors">Getting Started for Donors</h3>
<h4 id="creating-your-donor-account">1. Creating Your Donor Account</h4>
<ol>
<li>Visit the platform and click “Donor Registration”</li>
<li>Complete reCAPTCHA verification</li>
<li>Provide your contact information</li>
<li>Select your preferred currency</li>
<li>Add optional organization details</li>
</ol>
<h4 id="browsing-students">2. Browsing Students</h4>
<ul>
<li>Use the public browse page to preview students</li>
<li>Register for full access to detailed profiles</li>
<li>Filter by university, field of study, funding need</li>
<li>Review student introduction videos and photos</li>
</ul>
<h4 id="making-a-sponsorship">3. Making a Sponsorship</h4>
<ol>
<li>Select “Sponsor Student” on chosen profile</li>
<li>Review the complete funding requirement</li>
<li>Choose your payment frequency (one-time or installments)</li>
<li>Complete payment through secure Stripe processing</li>
<li>Receive confirmation email with receipt</li>
</ol>
<h4 id="managing-your-sponsorship">4. Managing Your Sponsorship</h4>
<ul>
<li>Access your donor dashboard for overview</li>
<li>Communicate directly with your sponsored student</li>
<li>Track academic progress and achievements</li>
<li>Download tax documentation and receipts</li>
</ul>
<h3 id="getting-started-for-administrators">Getting Started for Administrators</h3>
<h4 id="application-review-process">1. Application Review Process</h4>
<ol>
<li>Access admin dashboard for application queue</li>
<li>Review submitted documents and information</li>
<li>Assign case workers for field verification</li>
<li>Monitor review progress and recommendations</li>
<li>Make final approval/rejection decisions</li>
</ol>
<h4 id="case-worker-management">2. Case Worker Management</h4>
<ol>
<li>Create case worker accounts with secure passwords</li>
<li>Assign applications based on geographic regions</li>
<li>Monitor review progress and quality</li>
<li>Provide feedback and guidance as needed</li>
</ol>
<h4 id="interview-coordination">3. Interview Coordination</h4>
<ol>
<li>Create board member profiles</li>
<li>Schedule interviews for approved applications</li>
<li>Coordinate panel assignments</li>
<li>Record interview decisions and outcomes</li>
</ol>
<h4 id="financial-oversight">4. Financial Oversight</h4>
<ol>
<li>Monitor donation and sponsorship activity</li>
<li>Process disbursements to approved students</li>
<li>Generate financial reports and analytics</li>
<li>Maintain audit trails for all transactions</li>
</ol>
<hr>
<h2 id="administration-guide">Administration Guide</h2>
<h3 id="user-management-1">User Management</h3>
<h4 id="creating-admin-users">Creating Admin Users</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Super Admin can create new admin accounts</span>
POST /api/super-admin/users
<span class="token punctuation">{</span>
  <span class="token string">"name"</span><span class="token keyword">:</span> <span class="token string">"Admin Name"</span>,
  <span class="token string">"email"</span><span class="token keyword">:</span> <span class="token string">"admin@awakeconnect.org"</span>,
  <span class="token string">"role"</span><span class="token keyword">:</span> <span class="token string">"ADMIN"</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="managing-case-workers">Managing Case Workers</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Create case worker with secure password generation</span>
POST /api/users/case-workers
<span class="token punctuation">{</span>
  <span class="token string">"name"</span><span class="token keyword">:</span> <span class="token string">"Case Worker Name"</span>,
  <span class="token string">"email"</span><span class="token keyword">:</span> <span class="token string">"caseworker@awakeconnect.org"</span>,
  <span class="token string">"recaptchaToken"</span><span class="token keyword">:</span> <span class="token string">"..."</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="application-management">Application Management</h3>
<h4 id="application-status-workflow">Application Status Workflow</h4>
<pre><code>PENDING → PROCESSING → CASE_WORKER_APPROVED → 
INTERVIEW_SCHEDULED → INTERVIEW_COMPLETED → 
BOARD_APPROVED → APPROVED
</code></pre>
<h4 id="status-update-commands">Status Update Commands</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Update application status</span>
PATCH /api/applications/:id/status
<span class="token punctuation">{</span>
  <span class="token string">"status"</span><span class="token keyword">:</span> <span class="token string">"CASE_WORKER_APPROVED"</span>,
  <span class="token string">"notes"</span><span class="token keyword">:</span> <span class="token string">"Field verification completed successfully"</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="financial-management">Financial Management</h3>
<h4 id="currency-configuration">Currency Configuration</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Add new exchange rate</span>
POST /api/fx
<span class="token punctuation">{</span>
  <span class="token string">"base"</span><span class="token keyword">:</span> <span class="token string">"USD"</span>,
  <span class="token string">"quote"</span><span class="token keyword">:</span> <span class="token string">"PKR"</span>,
  <span class="token string">"rate"</span><span class="token keyword">:</span> 278.50,
  <span class="token string">"source"</span><span class="token keyword">:</span> <span class="token string">"manual_admin_update"</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="disbursement-processing">Disbursement Processing</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Create disbursement record</span>
POST /api/disbursements
<span class="token punctuation">{</span>
  <span class="token string">"studentId"</span><span class="token keyword">:</span> <span class="token string">"student_id_here"</span>,
  <span class="token string">"amount"</span><span class="token keyword">:</span> 50000,
  <span class="token string">"notes"</span><span class="token keyword">:</span> <span class="token string">"First semester disbursement"</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="system-monitoring">System Monitoring</h3>
<h4 id="health-checks">Health Checks</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># System health endpoint</span>
GET /api/health
Response: <span class="token punctuation">{</span> <span class="token string">"ok"</span><span class="token keyword">:</span> true, <span class="token string">"timestamp"</span><span class="token keyword">:</span> <span class="token string">"2025-11-21T..."</span> <span class="token punctuation">}</span>
</code></pre>
<h4 id="application-metrics">Application Metrics</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Get system statistics</span>
GET /api/statistics/detailed
Response: <span class="token punctuation">{</span>
  <span class="token string">"applications"</span><span class="token keyword">:</span> <span class="token punctuation">{</span> <span class="token string">"total"</span><span class="token keyword">:</span> 150, <span class="token string">"approved"</span><span class="token keyword">:</span> 85, <span class="token string">"pending"</span><span class="token keyword">:</span> 45 <span class="token punctuation">}</span>,
  <span class="token string">"students"</span><span class="token keyword">:</span> <span class="token punctuation">{</span> <span class="token string">"total"</span><span class="token keyword">:</span> 200, <span class="token string">"active"</span><span class="token keyword">:</span> 85, <span class="token string">"graduated"</span><span class="token keyword">:</span> 15 <span class="token punctuation">}</span>,
  <span class="token string">"financial"</span><span class="token keyword">:</span> <span class="token punctuation">{</span> <span class="token string">"totalFunded"</span><span class="token keyword">:</span> 425000, <span class="token string">"activeSponsorships"</span><span class="token keyword">:</span> 85 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="data-export--backup">Data Export &amp; Backup</h3>
<h4 id="export-applications">Export Applications</h4>
<pre class=" language-bash"><code class="prism  language-bash">GET /api/export/applications
<span class="token comment"># Downloads CSV with complete application data</span>
</code></pre>
<h4 id="database-backup">Database Backup</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Manual backup command</span>
<span class="token function">cd</span> database
./export_database.sh
<span class="token comment"># Creates timestamped backup file</span>
</code></pre>
<hr>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<h4 id="login-problems">Login Problems</h4>
<p><strong>Issue:</strong> Users cannot log in after password reset<br>
<strong>Solution:</strong></p>
<ol>
<li>Check password reset token expiration (24 hours)</li>
<li>Verify email delivery to user’s inbox/spam folder</li>
<li>Regenerate password reset if needed</li>
</ol>
<h4 id="payment-processing-failures">Payment Processing Failures</h4>
<p><strong>Issue:</strong> Stripe payments failing or not completing<br>
<strong>Solution:</strong></p>
<ol>
<li>Verify Stripe webhook endpoint configuration</li>
<li>Check payment intent status in Stripe dashboard</li>
<li>Validate currency conversion rates are current</li>
<li>Review payment logs for specific error codes</li>
</ol>
<h4 id="file-upload-issues">File Upload Issues</h4>
<p><strong>Issue:</strong> Documents or photos failing to upload<br>
<strong>Solution:</strong></p>
<ol>
<li>Verify file size limits (images: 5MB, documents: 10MB)</li>
<li>Check supported file types (.jpg, .png, .pdf, .doc, .docx)</li>
<li>Ensure server storage space availability</li>
<li>Review file upload permissions</li>
</ol>
<h3 id="performance-issues">Performance Issues</h3>
<h4 id="slow-page-loading">Slow Page Loading</h4>
<p><strong>Diagnosis Steps:</strong></p>
<ol>
<li>Check server resource usage (CPU, memory, disk)</li>
<li>Review database query performance</li>
<li>Analyze network latency to database</li>
<li>Check Nginx error logs for bottlenecks</li>
</ol>
<p><strong>Solutions:</strong></p>
<ol>
<li>Optimize database queries with proper indexing</li>
<li>Implement Redis caching for frequent queries</li>
<li>Upgrade server resources if needed</li>
<li>Enable Nginx gzip compression</li>
</ol>
<h4 id="database-connection-errors">Database Connection Errors</h4>
<p><strong>Common Causes:</strong></p>
<ol>
<li>Connection pool exhaustion</li>
<li>Database server resource limits</li>
<li>Network connectivity issues</li>
<li>Authentication failures</li>
</ol>
<p><strong>Resolution:</strong></p>
<ol>
<li>Restart database service: <code>sudo systemctl restart postgresql</code></li>
<li>Check connection limits: <code>SHOW max_connections;</code></li>
<li>Verify database credentials in <code>.env</code> file</li>
<li>Monitor connection pool usage</li>
</ol>
<h3 id="security-issues">Security Issues</h3>
<h4 id="recaptcha-failures">reCAPTCHA Failures</h4>
<p><strong>Issue:</strong> High rate of reCAPTCHA validation failures<br>
<strong>Investigation:</strong></p>
<ol>
<li>Check reCAPTCHA secret key configuration</li>
<li>Verify domain whitelist in Google Console</li>
<li>Review reCAPTCHA score thresholds</li>
<li>Monitor for automated attack patterns</li>
</ol>
<h4 id="suspicious-user-activity">Suspicious User Activity</h4>
<p><strong>Detection:</strong> Multiple failed login attempts, unusual payment patterns<br>
<strong>Response Protocol:</strong></p>
<ol>
<li>Review user activity logs</li>
<li>Temporarily suspend suspicious accounts</li>
<li>Notify system administrators</li>
<li>Enhanced monitoring for related activities</li>
</ol>
<h3 id="email-delivery-problems">Email Delivery Problems</h3>
<h4 id="welcome-emails-not-sending">Welcome Emails Not Sending</h4>
<p><strong>Checklist:</strong></p>
<ol>
<li>SMTP server configuration in <code>.env</code></li>
<li>Email service provider authentication</li>
<li>Rate limiting settings</li>
<li>Email template HTML validation</li>
</ol>
<h4 id="notification-delays">Notification Delays</h4>
<p><strong>Common Causes:</strong></p>
<ol>
<li>Email queue backlog</li>
<li>SMTP server rate limiting</li>
<li>Large attachment sizes</li>
<li>Email provider throttling</li>
</ol>
<p><strong>Solutions:</strong></p>
<ol>
<li>Implement email queue with retry logic</li>
<li>Optimize email templates for size</li>
<li>Configure appropriate sending rates</li>
<li>Monitor email service provider status</li>
</ol>
<hr>
<h2 id="maintenance--support">Maintenance &amp; Support</h2>
<h3 id="regular-maintenance-tasks">Regular Maintenance Tasks</h3>
<h4 id="daily-tasks">Daily Tasks</h4>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Monitor system health and error logs</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Review payment processing status</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Check email delivery rates</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Verify backup completion</li>
</ul>
<h4 id="weekly-tasks">Weekly Tasks</h4>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Update exchange rates for currency conversion</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Review application approval pipeline</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Monitor user registration patterns</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Analyze system performance metrics</li>
</ul>
<h4 id="monthly-tasks">Monthly Tasks</h4>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Security update review and application</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Database performance optimization</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> User feedback analysis and action items</li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled=""> Financial reconciliation and reporting</li>
</ul>
<h3 id="backup-strategy">Backup Strategy</h3>
<h4 id="database-backups">Database Backups</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Automated daily backup script</span>
<span class="token comment">#!/bin/bash</span>
TIMESTAMP<span class="token operator">=</span><span class="token punctuation">$(</span>date +<span class="token string">"%Y%m%d_%H%M%S"</span><span class="token punctuation">)</span>
BACKUP_FILE<span class="token operator">=</span><span class="token string">"awake_backup_<span class="token variable">$TIMESTAMP</span>.sql"</span>
pg_dump awake_production <span class="token operator">&gt;</span> /backups/<span class="token variable">$BACKUP_FILE</span>
<span class="token comment"># Retain last 30 days of backups</span>
<span class="token function">find</span> /backups -name <span class="token string">"awake_backup_*.sql"</span> -mtime +30 -delete
</code></pre>
<h4 id="file-storage-backups">File Storage Backups</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Backup uploaded files</span>
<span class="token function">rsync</span> -av /home/awakeuser/awake/server/uploads/ /backups/uploads_backup/
</code></pre>
<h3 id="monitoring--alerts">Monitoring &amp; Alerts</h3>
<h4 id="system-monitoring-1">System Monitoring</h4>
<pre class=" language-javascript"><code class="prism  language-javascript"><span class="token comment">// Health check with detailed metrics</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/api/health/detailed'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> health <span class="token operator">=</span> <span class="token punctuation">{</span>
    timestamp<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    database<span class="token punctuation">:</span> <span class="token keyword">await</span> <span class="token function">checkDatabaseConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    storage<span class="token punctuation">:</span> <span class="token keyword">await</span> <span class="token function">checkStorageSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    memory<span class="token punctuation">:</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    uptime<span class="token punctuation">:</span> process<span class="token punctuation">.</span><span class="token function">uptime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>health<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="alert-configuration">Alert Configuration</h4>
<ul>
<li><strong>Database Connection Failures:</strong> Immediate notification</li>
<li><strong>Payment Processing Errors:</strong> Real-time monitoring</li>
<li><strong>Storage Space Low:</strong> Warning at 80% capacity</li>
<li><strong>High Error Rates:</strong> Alert if &gt;5% error rate over 5 minutes</li>
</ul>
<h3 id="support-contacts">Support Contacts</h3>
<h4 id="technical-support">Technical Support</h4>
<ul>
<li><strong>Platform Issues:</strong> <a href="mailto:admin@awakeconnect.org">admin@awakeconnect.org</a></li>
<li><strong>Payment Questions:</strong> <a href="mailto:payments@awakeconnect.org">payments@awakeconnect.org</a></li>
<li><strong>Emergency Contact:</strong> +92-XXX-XXXXXXX</li>
</ul>
<h4 id="development-support">Development Support</h4>
<ul>
<li><strong>Repository:</strong> <a href="https://github.com/webciters-dev/donors">https://github.com/webciters-dev/donors</a></li>
<li><strong>Documentation:</strong> Available in repository <code>/docs</code> folder</li>
<li><strong>Issue Tracking:</strong> GitHub Issues for bug reports</li>
</ul>
<h3 id="version-management">Version Management</h3>
<h4 id="update-process">Update Process</h4>
<ol>
<li><strong>Development Testing:</strong> Comprehensive testing in dev environment</li>
<li><strong>Staging Deployment:</strong> Deploy to staging for final validation</li>
<li><strong>Backup Creation:</strong> Full system backup before production update</li>
<li><strong>Production Deployment:</strong> Gradual rollout with monitoring</li>
<li><strong>Rollback Plan:</strong> Quick revert procedure if issues arise</li>
</ol>
<h4 id="version-history">Version History</h4>
<ul>
<li><strong>v1.0</strong> - Initial production release with core functionality</li>
<li><strong>v1.1</strong> - Enhanced interview system and board member management</li>
<li><strong>v1.2</strong> - Multi-currency support and payment optimization</li>
<li><strong>v2.0</strong> - Planned: Mobile app integration and advanced analytics</li>
</ul>
<hr>
<h2 id="appendices">Appendices</h2>
<h3 id="appendix-a-api-reference-quick-guide">Appendix A: API Reference Quick Guide</h3>
<h4 id="authentication">Authentication</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Login</span>
POST /api/auth/login
Body: <span class="token punctuation">{</span> <span class="token string">"email"</span><span class="token keyword">:</span> <span class="token string">"user@example.com"</span>, <span class="token string">"password"</span><span class="token keyword">:</span> <span class="token string">"password"</span> <span class="token punctuation">}</span>

<span class="token comment"># Register Student</span>
POST /api/auth/register-student
Body: <span class="token punctuation">{</span> <span class="token string">"email"</span><span class="token keyword">:</span> <span class="token string">"..."</span>, <span class="token string">"password"</span><span class="token keyword">:</span> <span class="token string">"..."</span>, <span class="token string">"recaptchaToken"</span><span class="token keyword">:</span> <span class="token string">"..."</span> <span class="token punctuation">}</span>
</code></pre>
<h4 id="students">Students</h4>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token comment"># Get student profile</span>
GET /api/students/me
Headers: <span class="token punctuation">{</span> <span class="token string">"Authorization"</span><span class="token keyword">:</span> <span class="token string">"Bearer jwt_token"</span> <span class="token punctuation">}</span>

<span class="token comment"># Update profile</span>
PUT /api/students/me
Body: <span class="token punctuation">{</span> <span class="token string">"name"</span><span class="token keyword">:</span> <span class="token string">"..."</span>, <span class="token string">"university"</span><span class="token keyword">:</span> <span class="token string">"..."</span>, <span class="token punctuation">..</span>. <span class="token punctuation">}</span>
</code></pre>
<h3 id="appendix-b-database-schema-reference">Appendix B: Database Schema Reference</h3>
<h4 id="key-relationships">Key Relationships</h4>
<ul>
<li><code>User.studentId</code> → <code>Student.id</code> (One-to-one)</li>
<li><code>Student.applications</code> → <code>Application[]</code> (One-to-many)</li>
<li><code>Application.fieldReviews</code> → <code>FieldReview[]</code> (One-to-many)</li>
<li><code>Donor.sponsorships</code> → <code>Sponsorship[]</code> (One-to-many)</li>
</ul>
<h3 id="appendix-c-environment-variables-reference">Appendix C: Environment Variables Reference</h3>
<h4 id="required-variables">Required Variables</h4>
<pre class=" language-env"><code class="prism  language-env">DATABASE_URL                # PostgreSQL connection string
JWT_SECRET                 # JWT signing secret
EMAIL_HOST                 # SMTP server hostname
EMAIL_USER                 # SMTP username
EMAIL_PASS                 # SMTP password
STRIPE_SECRET_KEY          # Stripe secret key
RECAPTCHA_SECRET_KEY       # Google reCAPTCHA secret
</code></pre>
<h4 id="optional-variables">Optional Variables</h4>
<pre class=" language-env"><code class="prism  language-env">PORT                       # Server port (default: 3001)
FRONTEND_URL              # Frontend URL for CORS
EMAIL_PORT                # SMTP port (default: 587)
DEVELOPMENT_MODE          # Bypass reCAPTCHA in dev
</code></pre>
<hr>
<p><strong>Document Version:</strong> 1.0<br>
<strong>Last Updated:</strong> November 21, 2025<br>
<strong>Contact:</strong> <a href="mailto:admin@awakeconnect.org">admin@awakeconnect.org</a><br>
<strong>Repository:</strong> <a href="https://github.com/webciters-dev/donors">https://github.com/webciters-dev/donors</a></p>
<hr>
<p><em>This manual provides comprehensive documentation for the AWAKE Connect platform. For technical support or questions, please contact the development team.</em></p>
</div>
</body>

</html>
